<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>باقاتنا | Marketing Clinic</title>
    <meta name="description" content="تعرف على باقاتنا المتنوعة لخدمات التسويق وتصميم المواقع.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/responsive.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container navbar">
            <a href="/" class="logo">
                <img src="/logo.jpg" alt="Marketing Clinic">
            </a>
            <div class="hamburger">
                <i class="fas fa-bars"></i>
            </div>
            <nav class="nav-links">
                <a href="/">الرئيسية</a>
                <a href="/services">خدماتنا</a>
                <a href="/packages" class="active">باقاتنا</a>
                <a href="/portfolio">أعمالنا</a>
                <a href="/contact">اتصل بنا</a>
                <a href="https://wa.me/213549936340" class="btn btn-primary" target="_blank">اطلب عرض سعر</a>
            </nav>
        </div>
    </header>

    <main id="app">
        <section class="section" style="background-color: var(--color-bg-light);">
            <div class="container text-center">
                <h1>خطط أسعار تناسب الجميع</h1>
                <p style="max-width: 600px; margin: 1rem auto; color: var(--color-text-light);">اختر الباقة التي تناسب
                    احتياجاتك وميزانيتك.</p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="pricing-grid" id="packages-container">
                    <!-- Loaded via JS -->
                    <div style="width: 100%; text-align: center;">
                        <i class="fas fa-spinner fa-spin fa-2x"></i> جاري تحميل الباقات...
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating WhatsApp -->
    <a href="https://wa.me/213549936340" class="whatsapp-float" target="_blank" title="تواصل معنا عبر واتساب">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-column">
                <h3>Marketing Clinic</h3>
                <p>شريكك الرقمي لنمو أعمالك في الجزائر.</p>
            </div>
            <div class="footer-column">
                <h3>روابط سريعة</h3>
                <ul>
                    <li><a href="/">الرئيسية</a></li>
                    <li><a href="/services">خدماتنا</a></li>
                    <li><a href="/packages">باقاتنا</a></li>
                    <li><a href="/contact">اتصل بنا</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>تواصل معنا</h3>
                <p><i class="fab fa-whatsapp"></i> 0549 93 63 40</p>
                <p><i class="fas fa-envelope"></i> contact@example.com</p>
            </div>
        </div>
        <div class="text-center"
            style="margin-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem;">
            <p>&copy; 2025 Marketing Clinic. جميع الحقوق محفوظة.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('packages-container');
            try {
                // First check if we need to seed
                const checkRes = await fetch('/api/packages');
                let packages = await checkRes.json();

                if (packages.length === 0) {
                    // Auto-seed if empty for better UX
                    await fetch('/api/packages/seed', { method: 'POST' });
                    const res = await fetch('/api/packages');
                    packages = await res.json();
                }

                container.innerHTML = '';
                packages.forEach(pkg => {
                    const featuresHtml = pkg.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('');
                    const isPopular = pkg.name.includes('الأعمال');
                    const cardClass = isPopular ? 'pricing-card featured' : 'pricing-card';
                    const btnClass = isPopular ? 'btn btn-primary' : 'btn btn-outline';
                    const badge = isPopular ? '<div class="popular-badge">الأكثر طلباً</div>' : '';

                    const card = `
                        <div class="${cardClass}">
                            ${badge}
                            <div class="pricing-header">
                                <h3>${pkg.name}</h3>
                                <div class="price" style="font-size: 2.5rem; color: var(--color-primary); font-weight: 800; margin-bottom: 1rem;">
                                    ${pkg.price} <span style="font-size: 1rem; color: var(--color-text-light); font-weight: normal;">DZD</span>
                                </div>
                            </div>
                            <div class="pricing-features">
                                <ul>
                                    ${featuresHtml}
                                </ul>
                            </div>
                            <a href="${pkg.ctaLink}" class="${btnClass}">اختار الباقة</a>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            } catch (err) {
                container.innerHTML = '<p class="text-center" style="color: red;">فشل تحميل الباقات.</p>';
            }
        });
    </script>
    <script type="module" src="/main.js"></script>
</body>

</html>